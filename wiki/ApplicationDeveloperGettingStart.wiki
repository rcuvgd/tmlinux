= Introduction =

  This page describes how to compile your applications and run them on tmlinux.


= Details =


==Preparation:== 
  === 1. Get and install TCS Linux edition.===

  First of all, you should install TCS Linux edition on your Linux machines. Please goto [http://www.tcshelp.com] to get it. Of course, you should have the license for it. 
  In the following section, let's support the installation directory of your TCS is _*/opt/NXP/TCS510/*_ 

  === 2. Checkout sysroots from this project's svn.===
  Now make your work directory (suppose it is _*/home/guohr/worktest/*_), at this directory, use the following command to get the sysroots:
  {{{
cd /home/guohr/worktest/
svn checkout http://tmlinux.googlecode.com/svn/trunk/sysroots/
  }}}
  === 3. Setup application building environment.===
  Make sure the TCS tools(such as tmcc, tmld) in the PATH environment and the compiler for your application building in the PATH environment.
  {{{
export PATH=$PATH:/opt/NXP/TCS510/bin/
export PATH=$PATH:/home/guohr/worktest/sysroots/pnx1500_ttisim_uclibc/x86-linux2/
  }}}
  
  To validate the environment, at shell, use the following command, the result will like this:
  {{{
guohr@ghr-notebook-02:~/worktest/tmlinux-app> tmcc -V
tmcc: V7.1.0 of TCS V5.1(0042rc6_Linux)
tmcc warning : no work
  }}}
  {{{
guohr@ghr-notebook-02:~/worktest/tmlinux-app>trimedia-gss-linux-tcs-pnx1500el_fp64-uclibc-gcc -V
tmcc: V7.1.0 of TCS V5.1(0042rc6_Linux)
tmcc warning : no work
  }}}
  === 4. Create TCS environment for building your applications.===
  To create the whole TCS environment for building tmlinux applications, you need to goto *_sysroots/sysroots/pnx1500_ttisim_uclibc/tcs/5.1.0_* and then use the following command:
  {{{
cd /home/guohr/worktest/tmlinux-app/sysroots/pnx1500_ttisim_uclibc/tcs/5.1.0
TCS=/opt/NXP/TCS510 ./creat-tcs.sh
  }}}
  Please set TCS with your TCS installation path (In the above example, it is *_/opt/NXP/TCS510_*).

==Build your application:==  
  === 1. Note about tmlinux applications ===
  Now, you can compile your exist application, but before compiling them, please note that:
  *INPUT/OUTPUT FUNCTIONS CANNOT WORK
  Until now, tmlinux can only run on trimedia simulator. In another words, it can not run on any real boards. Because of lacking real output devices, this linux kernel directs stdout/stderr to /dev/null, which means that these output functions (such as `printf()`, `puts()`) will output nothing. Because of lacking real input devices, this linux kernel will wait forever when application calls input functions (such as `gets()`, `getchar()`)

  *WITHOUT `PRINTF()`, HOW CAN I SEE APPLICATION RUNNING
  As I said before, tmlinux's `printf()` just output information to /dev/null. To see application running, I use *TCS*'s `printf()` instead of tmlinux's `printf()`. So, in the following code,
{{{
#include <stdio.h>

int
main(void)
{
   printf("Hello world!\n");
   return 0;
}
}}}
  the *printf()* here is provided by TCS but not tmlinux. So it still can output information when using ttisim. 
  But *PLEASE DO NOTE THAT:* high frequent `printf()` may cause the TCS system suspend, so try to avoid this situation.

  === 2. Build your applications===
  
== Run your applications==